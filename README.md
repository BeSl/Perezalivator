# "Перезаливатор"
Приложение для "перезаливки" баз данных 1С:Предприятия

## Описание
Под словом "перезалить" понимается процедура восстановления одной базы данных из данных другой базы данных.
Например, елси необходимо загрузить данные из базы продуктива в тестовую или разработочную.

Приложение "Перезаливатор" позволяет максимально автоматизировать процесс "перезаливки" баз данных 1С:Предприятия. 
При этом в момент перезаливки выполняется алгоритм, состоящий из следующих действий:

1. Установка блокировки регламентных заданий и начала сеансов в базе-приемнике
2. Завершение активных сеансов (спустя несколько минут) в базе-приемнике
3. Расчет последовательности файлов резервных копий для **базы-источника** для восстановления на указанную дату
4. Восстановление базы-приемника по найденной последовательности файлов
5. Перевод базы-приемника в простую модель восстановления
6. Сжатие файлов журнала транзакций базы-приемника
7. Отключение базы-приемника от хранилища
8. Подключение базы-приемника к хранилищу
9. Обновление конфигурации базы данных базы-приемника
10. Снятие блокировки регламентных заданий и начала сеансов базы-приемника
11. Уведомление о результате по электронной почте

Имеется GUI-интерфейс для выбора базы-приемника и базы-назначения:


## Установка

### Зависимости  

Необходима библиотека **json**: https://github.com/oscript-library/json
Установка:
``` cmd
opm install json
```

Необходима библиотека **gui**: https://github.com/oscript-library/oscript-simple-gui
Установка:
``` cmd
opm install gui
```

Необходим набор библиотек **TLib** : https://github.com/Tavalik/OS_TScripts/tree/master/Tlib
Установка копированием каталога Tlib в каталог библиотек (по умолчанию в C:\Program Files (x86)\OneScript\lib)

### Установка приложения

Установка копированием файлов текущего репозитория.

## Описание и работа с приложением

Запуск приложения осуществляется запуском файла **Perezalivator_Run.bat**
При первом запуске в текущем каталоге будет создан пустой файл настроек **Perezalivator_Params.json**. 

Необходимо заполнить все необходимые параметры, описав возможные базы-источники, базы-назначения и параметры для отправки электронных писем.

